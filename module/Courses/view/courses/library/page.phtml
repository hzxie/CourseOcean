<?php 
	echo $this->headTitle('课程库 | ');
	echo $this->headLink()->appendStylesheet($this->basePath().'/css/courses/library.css');
?>

<div id="content">
	<div id="banner">
		<div id="title">
			<h1>课程库</h1>
			<h2>提供最适合您的培训</h2>
		</div> <!-- #title -->
	</div> <!-- #banner -->
	<div id="filter">
		<select name="course-types">
			<option value="">所有课程类别</option>
			<?php foreach ( $courseTypes as $courseType ) { ?>
			<option value="<?php echo $courseType->course_type_slug; ?>"><?php echo $courseType->course_type_name; ?></option>
			<?php } ?>
		</select>
		<input name="keyword" type="text" />
		<input type="submit" class="btn" value="搜索" />
	</div> <!-- #filter -->
	<div id="main-content">
		<div id="courses">
			<?php
				foreach ( $courses as $course ) {
			?>
			<div class="section">
				<div class="left">
					<?php
						if ( strtotime($course->create_time) > strtotime('-7 day', time()) ) {
					?>
					<div class="brand brand-new"></div>
					<?php } ?>
					<div class="fieldset">
						<div class="title">
							<a href="<?php echo $this->basePath("courses/library/detail/$course->course_id"); ?>">
								<?php echo $course->course_name; ?>
							</a>
						</div> <!-- .fieldset -->
						<div class="brief"><?php echo $course->brief; ?></div> <!-- .brief -->
					</div> <!-- .fieldset -->
					<div class="details">
						<ul class="inline">
							<li><strong>培训周期: </strong><?php echo $course->cycle; ?>天</li>
							<li><strong>讲师: </strong><?php echo $course->real_name; ?></li>
							<li><strong>听众范围: </strong><?php echo $course->audience; ?></li>
						</ul>
					</div> <!-- details -->
				</div> <!-- .left -->
				<div class="right">
					<img src="<?php echo $this->basePath("img/courses/$course->course_type_slug.jpg") ?>" alt="Thumbnail" />
				</div> <!-- .right -->
			</div> <!-- .section -->
			<?php } ?>
		</div> <!-- #courses -->
		<div id="page-navigation">
			<ul class="inline">
			<?php
				$basePath = $this->basePath().'/courses/library/page/';
			?>
			<?php if ( $currentPageNumber > 1 ): ?>
				<li><a href="<?php echo $basePath.($currentPageNumber - 1); ?>">上一页</a></li>
			<?php endif; ?>
			<?php
				$lowerBound = $currentPageNumber - 5;
				$lowerBound = ( $lowerBound > 0 ) ? $lowerBound : 1;
				$upperBound = $currentPageNumber + 4;
				$upperBound = ( $upperBound <= $numberOfPages ) ? $upperBound : $numberOfPages;

				for ( $i = $lowerBound; $i <= $upperBound; ++ $i ) {
					if ( $i == $currentPageNumber ) {
						echo "<li>$i</li>";
					} else {
						echo "<li><a href=\"$basePath$i\">$i</a></li>";
					}
				}
			?>
			<?php if ( $currentPageNumber < $numberOfPages ): ?>
				<li><a href="<?php echo $basePath.($currentPageNumber + 1); ?>">下一页</a></li>
			<?php endif; ?>
			</ul>
		</div> <!-- page-navigation-->
	</div> <!-- #main-content -->
</div> <!-- #content -->